<!-- pages/upload.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SkillBridge ‚Äì Upload Your Notes</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../css/style.css" />

  <!-- Google Fonts for Devanagari -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Poppins', 'Noto Sans Devanagari', sans-serif; }
    .devanagari { font-family: 'Noto Sans Devanagari', sans-serif; }
  </style>
</head>

<body class="bg-gradient-to-br from-green-50 via-teal-50 to-blue-50 min-h-screen flex items-center justify-center py-8 px-4">

  <!-- Main Container -->
  <div class="max-w-2xl w-full">

    <!-- Header -->
    <div class="text-center mb-10">
      <img src="../assets/logo.png" alt="SkillBridge Logo" class="h-20 mx-auto mb-4 drop-shadow-md" />
      <h1 id="pageTitle" class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
        Upload Your Own Notes
      </h1>
      <p id="pageSubtitle" class="text-xl text-gray-600">
        Upload a PDF or TXT file and get a custom quiz instantly!
      </p>
    </div>

    <!-- Upload Card -->
    <div class="bg-white rounded-3xl shadow-2xl p-10">
      <form id="uploadForm" class="space-y-8">
        
        <!-- File Input -->
        <div class="border-4 border-dashed border-gray-300 rounded-2xl p-10 text-center hover:border-indigo-500 transition-colors">
          <div class="text-6xl mb-4">üìÑ</div>
          <label for="notesFile" class="cursor-pointer">
            <span id="fileLabelText" class="text-xl font-medium text-gray-700 devanagari">
              Click to select your notes (PDF or TXT)
            </span>
            <input type="file" id="notesFile" name="notes" accept=".pdf,.txt" required
                   class="hidden" />
          </label>
          <p id="selectedFileName" class="mt-4 text-lg text-indigo-600 font-semibold hidden"></p>
        </div>

        <!-- Upload Button -->
        <button type="submit" id="uploadBtn"
                class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xl font-bold py-5 rounded-2xl hover:shadow-xl transform hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center">
          <span id="uploadBtnText">Generate Quiz from Notes</span>
          <span id="loadingSpinner" class="hidden ml-3">
            <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
          </span>
        </button>
      </form>

      <!-- Success Message -->
      <div id="successMessage" class="hidden mt-8 p-6 bg-green-100 border-2 border-green-300 rounded-xl text-center">
        <p class="text-xl font-bold text-green-800 devanagari">Quiz generated successfully! Redirecting...</p>
      </div>

      <!-- Error Message -->
      <div id="errorMessage" class="hidden mt-8 p-6 bg-red-100 border-2 border-red-300 rounded-xl text-center">
        <p class="text-lg font-bold text-red-800 devanagari">Something went wrong. Please try again.</p>
        <p id="errorDetail" class="mt-2 text-red-700"></p>
      </div>
    </div>

    <!-- Back Button -->
    <div class="text-center mt-8">
      <a href="subjects.html" class="text-gray-600 hover:text-indigo-600 font-medium underline devanagari">
        ‚Üê Back to Subjects
      </a>
    </div>
  </div>

  <!-- Scripts -->
  <script src="../js/main.js"></script>
  <script src="../js/upload.js"></script>

  <script>
    // Multilingual support
    const translations = {
      en: {
        pageTitle: "Upload Your Own Notes",
        pageSubtitle: "Upload a PDF or TXT file and get a custom quiz instantly!",
        fileLabelText: "Click to select your notes (PDF or TXT)",
        noFile: "No file selected",
        uploadBtnText: "Generate Quiz from Notes",
        processing: "Processing your notes...",
        success: "Quiz generated successfully! Redirecting...",
        error: "Something went wrong. Please try again.",
        invalidFile: "Please select a valid PDF or TXT file.",
        largeFile: "File is too large. Maximum size is 10MB."
      },
      hi: {
        pageTitle: "‡§Ö‡§™‡§®‡•á ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
        pageSubtitle: "PDF ‡§Ø‡§æ TXT ‡§´‡§º‡§æ‡§á‡§≤ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç!",
        fileLabelText: "‡§Ö‡§™‡§®‡•á ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§ö‡•Å‡§®‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç (PDF ‡§Ø‡§æ TXT)",
        noFile: "‡§ï‡•ã‡§à ‡§´‡§º‡§æ‡§á‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§ö‡•Å‡§®‡•Ä ‡§ó‡§à",
        uploadBtnText: "‡§®‡•ã‡§ü‡•ç‡§∏ ‡§∏‡•á ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§¨‡§®‡§æ‡§è‡§Ç",
        processing: "‡§Ü‡§™‡§ï‡•á ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...",
        success: "‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¨‡§® ‡§ó‡§à! ‡§∞‡•Ä‡§°‡§æ‡§Ø‡§∞‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...",
        error: "‡§ï‡•Å‡§õ ‡§ó‡§≤‡§§ ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§",
        invalidFile: "‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•à‡§ß PDF ‡§Ø‡§æ TXT ‡§´‡§º‡§æ‡§á‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§",
        largeFile: "‡§´‡§º‡§æ‡§á‡§≤ ‡§¨‡§π‡•Å‡§§ ‡§¨‡§°‡§º‡•Ä ‡§π‡•à‡•§ ‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ ‡§Ü‡§ï‡§æ‡§∞ 10MB ‡§π‡•à‡•§"
      },
      mr: {
        pageTitle: "‡§§‡•Å‡§Æ‡§ö‡•á ‡§∏‡•ç‡§µ‡§§‡§É‡§ö‡•á ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ",
        pageSubtitle: "PDF ‡§ï‡§ø‡§Ç‡§µ‡§æ TXT ‡§´‡§æ‡§á‡§≤ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ ‡§Ü‡§£‡§ø ‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§ï‡•ç‡§µ‡§ø‡§ù ‡§Æ‡§ø‡§≥‡§µ‡§æ!",
        fileLabelText: "‡§§‡•Å‡§Æ‡§ö‡•á ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§®‡§ø‡§µ‡§°‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§æ (PDF ‡§ï‡§ø‡§Ç‡§µ‡§æ TXT)",
        noFile: "‡§ï‡•ã‡§£‡§§‡•Ä‡§π‡•Ä ‡§´‡§æ‡§á‡§≤ ‡§®‡§ø‡§µ‡§°‡§≤‡•á‡§≤‡•Ä ‡§®‡§æ‡§π‡•Ä",
        uploadBtnText: "‡§®‡•ã‡§ü‡•ç‡§∏‡§™‡§æ‡§∏‡•Ç‡§® ‡§ï‡•ç‡§µ‡§ø‡§ù ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§æ",
        processing: "‡§§‡•Å‡§Æ‡§ö‡•á ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•ã‡§§ ‡§Ü‡§π‡•á‡§§...",
        success: "‡§ï‡•ç‡§µ‡§ø‡§ù ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡•Ä‡§§‡•ç‡§Ø‡§æ ‡§§‡§Ø‡§æ‡§∞ ‡§ù‡§æ‡§≤‡•Ä! ‡§∞‡•Ä‡§°‡§æ‡§Ø‡§∞‡•á‡§ï‡•ç‡§ü ‡§π‡•ã‡§§ ‡§Ü‡§π‡•á...",
        error: "‡§ï‡§æ‡§π‡•Ä‡§§‡§∞‡•Ä ‡§ö‡•Å‡§ï‡§≤‡•á. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§™‡•ç‡§∞‡§Ø‡§§‡•ç‡§® ‡§ï‡§∞‡§æ.",
        invalidFile: "‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•à‡§ß PDF ‡§ï‡§ø‡§Ç‡§µ‡§æ TXT ‡§´‡§æ‡§á‡§≤ ‡§®‡§ø‡§µ‡§°‡§æ.",
        largeFile: "‡§´‡§æ‡§á‡§≤ ‡§ñ‡•Ç‡§™ ‡§Æ‡•ã‡§†‡•Ä ‡§Ü‡§π‡•á. ‡§ï‡§Æ‡§æ‡§≤ ‡§Ü‡§ï‡§æ‡§∞ 10MB ‡§Ü‡§π‡•á."
      }
    };

    const lang = localStorage.getItem('userLanguage') || 'en';
    const t = translations[lang];

    // Apply translations
    document.getElementById('pageTitle').textContent = t.pageTitle;
    document.getElementById('pageSubtitle').textContent = t.pageSubtitle;
    document.getElementById('fileLabelText').textContent = t.fileLabelText;
    document.getElementById('uploadBtnText').textContent = t.uploadBtnText;

    // File selection feedback
    document.getElementById('notesFile').addEventListener('change', function(e) {
      const fileName = e.target.files[0]?.name || t.noFile;
      const fileDisplay = document.getElementById('selectedFileName');
      if (e.target.files.length > 0) {
        fileDisplay.textContent = fileName;
        fileDisplay.classList.remove('hidden');
      } else {
        fileDisplay.classList.add('hidden');
      }
    });

    // Add devanagari class if needed
    if (lang !== 'en') {
      document.querySelectorAll('.devanagari').forEach(el => el.classList.add('devanagari'));
    }
  </script>
</body>
</html>