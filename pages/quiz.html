<!-- pages/quiz.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SkillBridge – Quiz</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../css/style.css" />

  <!-- Google Fonts for Devanagari -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Poppins', 'Noto Sans Devanagari', sans-serif; }
    .devanagari { font-family: 'Noto Sans Devanagari', sans-serif; }
  </style>
</head>

<body class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 min-h-screen">

  <!-- Header -->
  <header class="bg-white shadow-lg py-6">
    <div class="container mx-auto px-4 text-center">
      <img src="../assets/logo.png" alt="SkillBridge Logo" class="h-14 mx-auto mb-3" />
      <h1 id="quizTitle" class="text-3xl md:text-4xl font-bold text-gray-800">
        Loading Quiz...
      </h1>
      <p id="questionCounter" class="text-lg text-gray-600 mt-2">Question <span id="currentQ">1</span> of <span id="totalQ">10</span></p>
      <div class="w-24 h-2 bg-gray-300 rounded-full mx-auto mt-4 overflow-hidden">
        <div id="progressBar" class="h-full bg-indigo-600 transition-all duration-500" style="width: 10%"></div>
      </div>
    </div>
  </header>

  <!-- Quiz Container -->
  <main class="container mx-auto px-4 py-12 max-w-3xl">
    <div id="quizContainer" class="bg-white rounded-2xl shadow-xl p-8 hidden">
      <h2 id="questionText" class="text-2xl font-semibold text-gray-800 mb-8 devanagari"></h2>

      <div id="optionsContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
        <!-- Options injected by JS -->
      </div>

      <div class="flex justify-between items-center">
        <button id="prevBtn" class="bg-gray-400 text-white px-6 py-3 rounded-full hover:bg-gray-500 disabled:opacity-50" disabled>
          Previous
        </button>
        <button id="nextBtn" class="bg-indigo-600 text-white px-8 py-3 rounded-full hover:bg-indigo-700">
          Next
        </button>
      </div>
    </div>

    <!-- Loading / Error State -->
    <div id="loadingState" class="text-center py-20">
      <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto"></div>
      <p class="mt-6 text-xl text-gray-600">Loading your quiz...</p>
    </div>

    <div id="errorState" class="hidden bg-red-100 text-red-700 p-6 rounded-xl text-center">
      <p class="text-lg font-medium">Oops! Something went wrong.</p>
      <p id="errorMessage">Could not load quiz questions.</p>
      <a href="subjects.html" class="mt-4 inline-block bg-red-600 text-white px-6 py-2 rounded-full hover:bg-red-700">Go Back</a>
    </div>
  </main>

  <!-- Scripts -->
  <script src="../js/main.js"></script>
  <script src="../js/quiz.js"></script>

  <script>
    // Translations for UI elements
    const uiTranslations = {
      en: {
        loading: "Loading your quiz...",
        customTitle: "Custom Quiz from Your Notes",
        prev: "Previous",
        next: "Next",
        submit: "Submit Quiz",
        resultBtn: "View Results"
      },
      hi: {
        loading: "आपकी क्विज़ लोड हो रही है...",
        customTitle: "आपके नोट्स से कस्टम क्विज़",
        prev: "पिछला",
        next: "अगला",
        submit: "क्विज़ सबमिट करें",
        resultBtn: "परिणाम देखें"
      },
      mr: {
        loading: "तुमची क्विझ लोड होत आहे...",
        customTitle: "तुमच्या नोट्सपासून कस्टम क्विझ",
        prev: "मागील",
        next: "पुढील",
        submit: "क्विझ सबमिट करा",
        resultBtn: "निकाल पहा"
      }
    };

    // Get language
    const lang = localStorage.getItem('userLanguage') || 'en';
    const ui = uiTranslations[lang];

    // Update loading text
    document.querySelector('#loadingState p').textContent = ui.loading;

    // Update button texts (will be done in quiz.js too, but safe here)
    document.getElementById('prevBtn').textContent = ui.prev;
    document.getElementById('nextBtn').textContent = ui.next;

    // Set custom title if needed (will be overridden by quiz.js)
    if (localStorage.getItem('customQuiz')) {
      document.getElementById('quizTitle').textContent = ui.customTitle;
    }

    // Add Devanagari class if needed
    if (lang !== 'en') {
      document.getElementById('questionText').classList.add('devanagari');
    }
  </script>
</body>
</html>